(window["webpackJsonpeos-browser"]=window["webpackJsonpeos-browser"]||[]).push([[0],{30:function(e,t,a){e.exports=a(99)},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),s=a.n(c),o=a(5),i=a(8),l=a(6),u=a(9),b=a(7),p=a(2),h=a.n(p),f=a(3),m=a(4),k=a(27),d=a(28),v=a.n(d),w=a(29),E=new(a.n(w).a),y=new function e(){var t=this;Object(m.a)(this,e),this.apiUrl="https://api.eosnewyork.io",this.rpc=new k.JsonRpc(this.apiUrl),this.abiCache={},this.retryDelay=1e3,this.maxRetries=10,this.getPrevBlock=function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}n=a.previous,e.next=8;break;case 4:return e.next=6,t.getInfo();case 6:r=e.sent,n=r.head_block_id;case 8:return e.next=10,t.getBlock(n);case 10:return(c=e.sent).actions=[],t.processBlock(c),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.processBlock=function(e){e.actions=[],e.transactions.forEach((function(t){if("object"===typeof t.trx){var a,n=t.trx.transaction.actions;(a=e.actions).push.apply(a,Object(b.a)(n))}}))},this.wait=function(e){return new Promise((function(t){return setTimeout(t,e)}))},this.getInfo=function(){return t.retry((function(){return t.rpc.get_info()}))},this.getBlock=function(e){return t.retry((function(){return t.rpc.get_block(e)}))},this.getAbi=function(){var e=Object(f.a)(h.a.mark((function e(a){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.abiCache[a]){e.next=2;break}return e.abrupt("return",t.abiCache[a]);case 2:return e.next=4,t.retry(Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.rpc.get_abi(a));case 1:case"end":return e.stop()}}),e)}))));case 4:return(n=e.sent).contracts={},n.abi&&n.abi.actions.forEach((function(e){n.contracts[e.name]=e.ricardian_contract})),t.abiCache[a]=n,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.retry=function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(r||!(n<t.maxRetries)){e.next=15;break}return e.prev=2,e.next=5,a();case 5:r=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),n++,e.next=13,t.wait(t.retryDelay);case 13:e.next=1;break;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},x=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={blocks:[]},a.totalBlocks=10,a.loadData=Object(f.a)(h.a.mark((function e(){var t,n,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a.setState({blocks:t}),n=0;case 3:if(!(n<a.totalBlocks)){e.next=13;break}return r=t[t.length-1],e.next=7,y.getPrevBlock(r);case 7:c=e.sent,t=[].concat(Object(b.a)(t),[c]),a.setState({blocks:t});case 10:n++,e.next=3;break;case 13:case"end":return e.stop()}}),e)}))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.state.blocks;return r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"app-title"},"EOSIO Blockchain Browser"),r.a.createElement("button",{type:"button",className:"button",onClick:this.loadData},"LOAD"),r.a.createElement(g,{blocks:e,totalBlocks:this.totalBlocks}))}}]),t}(n.PureComponent);function O(e){var t=e.label,a=e.value,n=e.onClick,c=r.a.createElement("span",{className:"eos-label"},t,":"),s=r.a.createElement("span",{className:"eos-value"},a);return n&&(c=r.a.createElement("button",{type:"button",className:"link-button",onClick:n},c),s=r.a.createElement("button",{type:"button",className:"link-button",onClick:n},s)),r.a.createElement("div",null,r.a.createElement("div",{className:"eos-label"},c),s)}var j=function(e){function t(e){var a;Object(m.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleClick=function(){a.state.showDetails||a.populateDetails(),a.setState((function(e){return{showDetails:!e.showDetails}}))},a.renderContract=function(e,t){try{return E.render(v.a.render(e,t))}catch(a){return console.log("ERROR: failed to render contract"),console.log(a),""}},a.populateDetails=Object(f.a)(h.a.mark((function e(){var t,n,r,c,s,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.actions,!t.detailsDownloaded){e.next=3;break}return e.abrupt("return");case 3:r=0;case 4:if(!(r<n.length)){e.next=16;break}if(!(c=n[r]).contract){e.next=8;break}return e.abrupt("continue",13);case 8:return e.next=10,y.getAbi(c.account);case 10:s=e.sent,(o=s.contracts[c.name])&&((i=Object(b.a)(n))[r].contract=a.renderContract(o,c.data),a.setState({actions:i}));case 13:r++,e.next=4;break;case 16:a.setState({detailsDownloaded:!0});case 17:case"end":return e.stop()}}),e)})));var n=a.props.block;return a.state={actions:n.actions,showDetails:!1,detailsDownloaded:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.block,t=this.state,a=t.actions,n=t.showDetails,c=0,s=a.map((function(e){return r.a.createElement("div",{className:"eos-block",key:++c},r.a.createElement(O,{label:"action",value:e.name}),r.a.createElement(O,{label:"account",value:e.account}),r.a.createElement(O,{label:"contract"}),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.contract}}))})),o=r.a.createElement("button",{type:"button",className:"link-button",onClick:this.handleClick},"hide actions"),i=r.a.createElement("div",{className:"eos-details"},o,s,o);return r.a.createElement("div",null,r.a.createElement("div",{className:"eos-block"},r.a.createElement(O,{label:"hash",value:e.id}),r.a.createElement(O,{label:"timestamp",value:e.timestamp}),r.a.createElement(O,{label:"actions",value:e.actions.length,onClick:this.handleClick})),n&&i,r.a.createElement("hr",null))}}]),t}(n.PureComponent),g=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).isLoading=function(e){var t=a.props.totalBlocks;return e.length<t},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.blocks.map((function(e){return r.a.createElement(j,{block:e,key:e.id})})),t=r.a.createElement("div",{className:"spinner-container"},r.a.createElement("img",{alt:"spinner",className:"spinner",src:"spinner.gif"}));return r.a.createElement("div",{className:"eos-blockchain"},r.a.createElement("hr",null),r.a.createElement("div",null,e),this.isLoading(e)&&t)}}]),t}(n.PureComponent),C=x;a(98);s.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.f0d203a9.chunk.js.map