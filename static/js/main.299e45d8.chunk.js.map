{"version":3,"sources":["actions/index.js","util/eos-client.js","components/BlockEntry.js","components/BlockView.js","containers/Block.js","components/Blockchain.js","containers/App.js","reducers/index.js","index.js"],"names":["requestBlocks","type","receivedBlock","block","doneBlocks","receivedDetail","blockId","actionIdx","contract","setTotalBlocks","totalBlocks","EosClient","args","getPrevBlock","a","previous","getInfo","info","head_block_id","getBlock","prevBlock","actions","processBlock","transactions","forEach","t","trx","transaction","push","wait","ms","Promise","resolve","setTimeout","retry","rpc","get_info","get_block","getAbi","account","abiCache","get_abi","abi","contracts","action","name","ricardian_contract","fun","numRetries","resource","maxRetries","retryDelay","Object","assign","this","apiUrl","JsonRpc","BlockEntry","props","label","value","onClick","labelElem","className","valueElem","BlockView","key","actionBlocks","map","dangerouslySetInnerHTML","__html","hideDetailsLink","details","id","timestamp","length","showDetails","md","MarkdownIt","renderContract","data","render","Mustache","err","console","log","populateDetails","dispatch","eosClient","isFetchingDetails","i","renderedContract","connect","state","ownProps","blocksById","Blockchain","blocks","isLoading","rows","Block","spinner","alt","src","App","loadData","isFetchingBlocks","event","target","prevProps","disabled","onChange","Component","initialState","reducer","oldBlock","oldActions","newAction","slice","store","createStore","document","getElementById"],"mappings":"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","file":"static/js/main.299e45d8.chunk.js","sourcesContent":["export const RECEIVED_BLOCK = 'RECEIVED_BLOCK';\nexport const REQUEST_BLOCKS = 'REQUEST_BLOCKS';\nexport const DONE_FETCHING_BLOCKS = 'DONE_FETCHING_BLOCKS';\nexport const REQUEST_DETAILS = 'REQUEST_DETAILS';\nexport const RECEIVED_DETAIL = 'RECEIVED_DETAIL';\nexport const TOGGLE_DETAILS = 'TOGGLE_DETAILS';\nexport const SET_TOTAL_BLOCKS = 'SET_TOTAL_BLOCKS';\n\nexport const requestBlocks = () => ({\n  type: REQUEST_BLOCKS,\n});\n\nexport const receivedBlock = (block) => ({\n  type: RECEIVED_BLOCK,\n  block,\n});\n\nexport const doneBlocks = () => ({\n  type: DONE_FETCHING_BLOCKS,\n});\n\nexport const requestDetails = (blockId) => ({\n  type: REQUEST_DETAILS,\n  blockId,\n});\n\nexport const receivedDetail = (blockId, actionIdx, contract) => ({\n  type: RECEIVED_DETAIL,\n  blockId,\n  actionIdx,\n  contract,\n});\n\nexport const toggleDetails = (blockId) => ({\n  type: TOGGLE_DETAILS,\n  blockId,\n});\n\nexport const setTotalBlocks = (totalBlocks) => ({\n  type: SET_TOTAL_BLOCKS,\n  totalBlocks,\n});\n","import { JsonRpc } from 'eosjs';\n\nclass EosClient {\n  constructor(args = {}) {\n    Object.assign(\n      this,\n      {\n        apiUrl: 'https://api.eosnewyork.io',\n        abiCache: {},\n        retryDelay: 1000,\n        maxRetries: 10,\n      },\n      args,\n    );\n    if (!this.rpc) {\n      this.rpc = new JsonRpc(this.apiUrl);\n    }\n  }\n\n  getPrevBlock = async (block) => {\n    let blockId;\n    if (block) {\n      blockId = block.previous;\n    } else {\n      const info = await this.getInfo();\n      blockId = info.head_block_id;\n    }\n    const prevBlock = await this.getBlock(blockId);\n    prevBlock.actions = [];\n    this.processBlock(prevBlock);\n    return prevBlock;\n  }\n\n  processBlock = (block) => {\n    block.actions = [];\n    block.transactions.forEach((t) => {\n      if (typeof t.trx === 'object') {\n        const { actions } = t.trx.transaction;\n        block.actions.push(...actions);\n      }\n    });\n  };\n\n  wait = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\n\n  getInfo = () => this.retry(() => this.rpc.get_info());\n\n  getBlock = (blockId) => this.retry(() => this.rpc.get_block(blockId));\n\n  getAbi = async (account) => {\n    if (this.abiCache[account]) return this.abiCache[account];\n    const abi = await this.retry(async () => this.rpc.get_abi(account));\n    abi.contracts = {};\n    if (abi.abi) {\n      abi.abi.actions.forEach((action) => {\n        abi.contracts[action.name] = action.ricardian_contract;\n      });\n    }\n    this.abiCache[account] = abi;\n    return abi;\n  };\n\n  retry = async (fun) => {\n    let numRetries = 0;\n    let resource;\n    while (!resource && numRetries < this.maxRetries) {\n      try {\n        resource = await fun();\n      } catch (err) {\n        numRetries++;\n        // console.log(`ERROR !!!!!!!!! retry: ${numRetries}`);\n        await this.wait(this.retryDelay);\n      }\n    }\n    return resource;\n  };\n}\n\nexport default EosClient;\n","import React from 'react';\n\nfunction BlockEntry(props) {\n  const { label, value, onClick } = props;\n  let labelElem = (\n    <span className=\"eos-label\">\n      {label}\n      :\n    </span>\n  );\n  let valueElem = (\n    <span className=\"eos-value\">\n      {value}\n    </span>\n  );\n  if (onClick) {\n    labelElem = (\n      <button type=\"button\" className=\"link-button\" onClick={onClick}>\n        {labelElem}\n      </button>\n    );\n    valueElem = (\n      <button type=\"button\" className=\"link-button\" onClick={onClick}>\n        {valueElem}\n      </button>\n    );\n  }\n  return (\n    <div>\n      <div className=\"eos-label\">{labelElem}</div>\n      {valueElem}\n    </div>\n  );\n}\n\nexport default BlockEntry;\n","import React from 'react';\nimport BlockEntry from './BlockEntry';\n\nfunction BlockView(props) {\n  const { block, onClick } = props;\n\n  let key = 0;\n  const actionBlocks = block.actions.map((action) => (\n    /* eslint react/no-danger: \"off\" */\n    <div className=\"eos-block\" key={++key}>\n      <BlockEntry label=\"action\" value={action.name} />\n      <BlockEntry label=\"account\" value={action.account} />\n      <BlockEntry label=\"contract\" />\n      <div dangerouslySetInnerHTML={{ __html: action.contract }} />\n    </div>\n  ));\n\n  const hideDetailsLink = (\n    <button type=\"button\" className=\"link-button\" onClick={() => onClick(block)}>\n      hide actions\n    </button>\n  );\n\n  const details = (\n    <div className=\"eos-details\">\n      {hideDetailsLink}\n      {actionBlocks}\n      {hideDetailsLink}\n    </div>\n  );\n\n  return (\n    <div>\n      <div className=\"eos-block\">\n        <BlockEntry label=\"hash\" value={block.id} />\n        <BlockEntry label=\"timestamp\" value={block.timestamp} />\n        <BlockEntry label=\"actions\" value={block.actions.length} onClick={() => onClick(block)} />\n      </div>\n      {block.showDetails && details}\n      <hr />\n    </div>\n  );\n}\n\nexport default BlockView;\n","import { connect } from 'react-redux';\nimport Mustache from 'mustache';\nimport MarkdownIt from 'markdown-it';\nimport { receivedDetail, requestDetails, toggleDetails } from '../actions';\nimport BlockView from '../components/BlockView';\n\nconst md = new MarkdownIt();\n\nconst renderContract = (contract, data) => {\n  try {\n    return md.render(Mustache.render(contract, data));\n  } catch (err) {\n    console.log('ERROR: failed to render contract');\n    console.log(err);\n    return '';\n  }\n};\n\nconst populateDetails = async (block, dispatch, eosClient) => {\n  const { actions, isFetchingDetails } = block;\n  if (isFetchingDetails) return;\n\n  dispatch(requestDetails(block.id));\n  for (let i = 0; i < actions.length; i++) {\n    const action = actions[i];\n    if (action.contract) continue;\n    const abi = await eosClient.getAbi(action.account);\n    const contract = abi.contracts[action.name];\n    if (contract) {\n      action.contract = renderContract(contract, action.data);\n      const renderedContract = renderContract(contract, action.data);\n      dispatch(receivedDetail(block.id, i, renderedContract));\n    }\n  }\n};\n\nconst onClick = (block, dispatch, eosClient) => {\n  if (!block.showDetails) {\n    populateDetails(block, dispatch, eosClient);\n  }\n  dispatch(toggleDetails(block.id));\n};\n\nconst mapStateToProps = (state, ownProps) => {\n  const { blocksById, isFetchingDetails } = state;\n  const { block } = ownProps;\n  return {\n    block: blocksById[block.id],\n    isFetchingDetails,\n  };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n  onClick: (block) => onClick(block, dispatch, ownProps.eosClient),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BlockView);\n","import React from 'react';\nimport Block from '../containers/Block';\n\nfunction Blockchain(props) {\n  const { blocks, blocksById, totalBlocks, eosClient } = props;\n  const isLoading = blocks.length < totalBlocks;\n  const rows = blocks.map((id) => (\n    <Block block={blocksById[id]} key={id} eosClient={eosClient} />\n  ));\n\n  const spinner = (\n    <div className=\"spinner-container\">\n      <img alt=\"spinner\" className=\"spinner\" src=\"spinner.gif\" />\n    </div>\n  );\n\n  return (\n    <div className=\"eos-blockchain\">\n      <hr />\n      <div>\n        {rows}\n      </div>\n      {isLoading && spinner}\n    </div>\n  );\n}\n\nexport default Blockchain;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { doneBlocks, receivedBlock, requestBlocks, setTotalBlocks } from '../actions';\nimport EosClient from '../util/eos-client';\nimport Blockchain from '../components/Blockchain';\n\nconst eosClient = new EosClient();\n\nclass App extends Component {\n  componentDidMount() {\n    this.loadData();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.totalBlocks !== this.props.totalBlocks) {\n      this.loadData();\n    }\n  }\n\n  loadData = async () => {\n    const { dispatch, isFetchingBlocks, totalBlocks } = this.props;\n    if (isFetchingBlocks) return;\n\n    let prevBlock;\n    dispatch(requestBlocks());\n    for (let i = 0; i < totalBlocks; i++) {\n      const block = prevBlock;\n      prevBlock = await eosClient.getPrevBlock(block);\n      dispatch(receivedBlock(prevBlock));\n    }\n    dispatch(doneBlocks());\n  };\n\n  setTotalBlocks = (event) => {\n    const { dispatch } = this.props;\n    dispatch(setTotalBlocks(event.target.value));\n  };\n\n  render() {\n    const { blocks, blocksById, totalBlocks, isFetchingBlocks } = this.props;\n    console.log(`render ${totalBlocks} blocks`);\n    return (\n      <div className=\"container\">\n        <h1 className=\"app-title\">EOSIO Blockchain</h1>\n        <button\n          type=\"button\"\n          className=\"button\"\n          onClick={this.loadData}\n          disabled={isFetchingBlocks}\n        >\n          LOAD\n        </button>\n        <select value={totalBlocks} onChange={this.setTotalBlocks} disabled={isFetchingBlocks} className=\"load\">\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"5\">5</option>\n          <option value=\"10\">10</option>\n          <option value=\"25\">25</option>\n        </select>\n        blocks\n\n        <Blockchain\n          blocks={blocks}\n          blocksById={blocksById}\n          totalBlocks={totalBlocks}\n          eosClient={eosClient}\n        />\n\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => state;\n\nexport default connect(mapStateToProps)(App);\n","import {\n  REQUEST_BLOCKS, RECEIVED_BLOCK, DONE_FETCHING_BLOCKS, SET_TOTAL_BLOCKS,\n  REQUEST_DETAILS, RECEIVED_DETAIL, TOGGLE_DETAILS,\n} from '../actions';\n\nconst initialState = {\n  totalBlocks: 10,\n  isFetchingBlocks: false,\n  blocks: [],\n  blocksById: {},\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case REQUEST_BLOCKS:\n      return {\n        ...state,\n        blocks: [],\n        blocksById: {},\n        isFetchingBlocks: true,\n      };\n    case RECEIVED_BLOCK: {\n      const { block } = action;\n      const blocks = [...state.blocks, block.id];\n      const blocksById = {\n        ...state.blocksById,\n        [block.id]: block,\n      };\n      return { ...state, blocks, blocksById };\n    }\n    case DONE_FETCHING_BLOCKS:\n      return { ...state, isFetchingBlocks: false };\n    case SET_TOTAL_BLOCKS:\n      return { ...state, totalBlocks: action.totalBlocks };\n    case REQUEST_DETAILS: {\n      const { blockId } = action;\n      const block = {\n        ...state.blocksById[blockId],\n        isFetchingDetails: true,\n      };\n      const blocksById = {\n        ...state.blocksById,\n        [block.id]: block,\n      };\n      return { ...state, blocksById };\n    }\n    case RECEIVED_DETAIL: {\n      const { blockId, actionIdx, contract } = action;\n      const oldBlock = state.blocksById[blockId];\n      const oldActions = oldBlock.actions;\n      const newAction = { ...oldActions[actionIdx], contract };\n      const actions = [\n        ...oldActions.slice(0, actionIdx),\n        newAction,\n        ...oldActions.slice(actionIdx + 1),\n      ];\n      const block = { ...oldBlock, actions };\n      const blocksById = {\n        ...state.blocksById,\n        [block.id]: block,\n      };\n      return { ...state, blocksById };\n    }\n    case TOGGLE_DETAILS: {\n      const { blockId } = action;\n      const oldBlock = state.blocksById[blockId];\n      const block = {\n        ...oldBlock,\n        showDetails: !oldBlock.showDetails,\n      };\n      const blocksById = {\n        ...state.blocksById,\n        [block.id]: block,\n      };\n      return { ...state, blocksById };\n    }\n    default:\n      return state;\n  }\n};\n\nexport default reducer;\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\nimport App from './containers/App';\nimport reducer from './reducers';\nimport './index.css';\n\nconst store = createStore(reducer);\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}