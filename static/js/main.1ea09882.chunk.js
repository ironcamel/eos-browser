(window["webpackJsonpeos-browser"]=window["webpackJsonpeos-browser"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(11),o=n(6),s=n(9),i=n(12),l=n(3),u=n(2),p=n.n(u),b=n(4),f=n(37),k=n.n(f),O=n(38),h=n.n(O),y=function(e){return{type:"RECEIVED_BLOCK",block:e}},d=function(e,t,n){return{type:"RECEIVED_DETAIL",blockId:e,actionIdx:t,contract:n}},m=function(e){return{type:"TOGGLE_DETAILS",blockId:e}},v=function(e){return{type:"SET_TOTAL_BLOCKS",totalBlocks:e}},E=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r,c,a,o,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.dispatch,r=t.isFetchingBlocks,c=t.totalBlocks,a=t.eosClient,r){e.next=13;break}s=0;case 3:if(!(s<c)){e.next=12;break}return i=o,e.next=7,a.getPrevBlock(i);case 7:o=e.sent,n(y(o));case 9:s++,e.next=3;break;case 12:n({type:"DONE_FETCHING_BLOCKS"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){return E(e),{type:"REQUEST_BLOCKS"}},g=new h.a,w=function(e,t){try{return g.render(k.a.render(e,t))}catch(n){return console.log("ERROR: failed to render contract"),console.log(n),""}},B=function(){var e=Object(b.a)(p.a.mark((function e(t,n,r){var c,a,o,s,i,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.actions,!n.isFetchingDetails){e.next=3;break}return e.abrupt("return");case 3:a=0;case 4:if(!(a<c.length)){e.next=16;break}if(!(o=c[a]).contract){e.next=8;break}return e.abrupt("continue",13);case 8:return e.next=10,r.getAbi(o.account);case 10:s=e.sent,(i=s.contracts[o.name])&&(o.contract=w(i,o.data),l=w(i,o.data),t(d(n.id,a,l)));case 13:a++,e.next=4;break;case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),D=function(e,t,n){return B(e,t,n),{type:"REQUEST_DETAILS",blockId:t.id}},I=n(8),x=n(13),P=n(15),C=n(14),_=n(16);var S=function(e){var t=e.label,n=e.value,r=e.onClick,a=c.a.createElement("span",{className:"eos-label"},t,":"),o=c.a.createElement("span",{className:"eos-value"},n);return r&&(a=c.a.createElement("button",{type:"button",className:"link-button",onClick:r},a),o=c.a.createElement("button",{type:"button",className:"link-button",onClick:r},o)),c.a.createElement("div",null,c.a.createElement("div",{className:"eos-label"},a),o)},T=function(e){function t(){return Object(I.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(x.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.dispatch,r=t.block,c=t.eosClient,a=t.requestDetails,o=e.block.showDetails,s=this.props.block.showDetails;o!==s&&s&&a(n,r,c)}},{key:"render",value:function(){var e=this.props,t=e.block,n=e.toggleDetails,r=0,a=t.actions.map((function(e){return c.a.createElement("div",{className:"eos-block",key:++r},c.a.createElement(S,{label:"action",value:e.name}),c.a.createElement(S,{label:"account",value:e.account}),c.a.createElement(S,{label:"contract"}),c.a.createElement("div",{className:"contract",dangerouslySetInnerHTML:{__html:e.contract}}))})),o=c.a.createElement("button",{type:"button",className:"link-button",onClick:function(){return n(t.id)}},"hide actions"),s=c.a.createElement("div",{className:"eos-details"},o,a,o);return c.a.createElement("div",null,c.a.createElement("div",{className:"eos-block"},c.a.createElement(S,{label:"hash",value:t.id}),c.a.createElement(S,{label:"timestamp",value:t.timestamp}),c.a.createElement(S,{label:"actions",value:t.actions.length,onClick:function(){return n(t.id)}})),t.showDetails&&s,c.a.createElement("hr",null))}}]),t}(r.Component);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=Object(s.b)((function(e,t){return{block:e.blocksById[t.block.id]}}),(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.a)({toggleDetails:m,requestDetails:D},e),{dispatch:e})}))(T);var R=function(e){var t=e.blocks,n=e.blocksById,r=e.eosClient,a=e.isFetchingBlocks,o=t.map((function(e){return c.a.createElement(L,{block:n[e],key:e,eosClient:r})})),s=c.a.createElement("div",{className:"spinner-container"},c.a.createElement("img",{alt:"spinner",className:"spinner",src:"spinner.gif"}));return c.a.createElement("div",{className:"eos-blockchain"},c.a.createElement("hr",null),c.a.createElement("div",null,o),a&&s)};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=function(e){function t(){return Object(I.a)(this,t),Object(P.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.requestBlocks)(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props.requestBlocks;e.totalBlocks!==this.props.totalBlocks&&t(this.props)}},{key:"render",value:function(){var e=this,t=this.props,n=t.blocks,r=t.blocksById,a=t.eosClient,o=t.isFetchingBlocks,s=t.setTotalBlocks,i=t.totalBlocks,u=t.requestBlocks,p=t.dispatch;return c.a.createElement("div",{className:"container"},c.a.createElement("h1",{className:"app-title"},"EOSIO Blockchain"),c.a.createElement("button",{type:"button",className:"button",onClick:function(){return u(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.props,{dispatch:p}))},disabled:o},"LOAD"),c.a.createElement("select",{value:i,onChange:function(e){return s(parseInt(e.target.value,10))},disabled:o,className:"load"},c.a.createElement("option",{value:"1"},"1"),c.a.createElement("option",{value:"2"},"2"),c.a.createElement("option",{value:"5"},"5"),c.a.createElement("option",{value:"10"},"10"),c.a.createElement("option",{value:"15"},"15"),c.a.createElement("option",{value:"20"},"20"),c.a.createElement("option",{value:"25"},"25")),"blocks",c.a.createElement(R,{blocks:n,blocksById:r,eosClient:a,isFetchingBlocks:o}))}}]),t}(r.Component);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=Object(s.b)((function(e){return e}),(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(o.a)({requestBlocks:j,setTotalBlocks:v},e),{dispatch:e})}))(F),q=n(10),G=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(I.a)(this,e),this.getPrevBlock=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,c,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}r=n.previous,e.next=8;break;case 4:return e.next=6,t.getInfo();case 6:c=e.sent,r=c.head_block_id;case 8:return e.next=10,t.getBlock(r);case 10:return(a=e.sent).actions=[],t._processBlock(a),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getInfo=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._retry((function(){return t.rpc.get_info()})));case 1:case"end":return e.stop()}}),e)}))),this.getBlock=function(){var e=Object(b.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._retry((function(){return t.rpc.get_block(n)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAbi=function(){var e=Object(b.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.abiCache[n]){e.next=2;break}return e.abrupt("return",t.abiCache[n]);case 2:return e.next=4,t._retry(Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.rpc.get_abi(n));case 1:case"end":return e.stop()}}),e)}))));case 4:return(r=e.sent).contracts={},r.abi&&r.abi.actions.forEach((function(e){r.contracts[e.name]=e.ricardian_contract})),t.abiCache[n]=r,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._processBlock=function(e){e.actions=[],e.transactions.forEach((function(t){if("object"===typeof t.trx){var n,r=t.trx.transaction.actions;(n=e.actions).push.apply(n,Object(q.a)(r))}}))},this._wait=function(e){return new Promise((function(t){return setTimeout(t,e)}))},this._retry=function(){var e=Object(b.a)(p.a.mark((function e(n){var r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(c||!(r<=t.maxRetries)){e.next=15;break}return e.prev=2,e.next=5,n();case 5:c=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),r++,e.next=13,t._wait(t.retryDelay);case 13:e.next=1;break;case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();var r={apiUrl:"https://api.eosnewyork.io",abiCache:{},retryDelay:1e3,maxRetries:10};Object.assign(this,r,n),this.rpc||(this.rpc=new i.JsonRpc(this.apiUrl))};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V={totalBlocks:10,isFetchingBlocks:!1,blocks:[],blocksById:{}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_BLOCKS":return Q({},e,{blocks:[],blocksById:{},isFetchingBlocks:!0});case"RECEIVED_BLOCK":var n=t.block,r=[].concat(Object(q.a)(e.blocks),[n.id]),c=Q({},e.blocksById,Object(l.a)({},n.id,n));return Q({},e,{blocks:r,blocksById:c});case"DONE_FETCHING_BLOCKS":return Q({},e,{isFetchingBlocks:!1});case"SET_TOTAL_BLOCKS":return Q({},e,{totalBlocks:t.totalBlocks});case"REQUEST_DETAILS":var a=t.blockId,o=Q({},e.blocksById[a],{isFetchingDetails:!0}),s=Q({},e.blocksById,Object(l.a)({},o.id,o));return Q({},e,{blocksById:s});case"RECEIVED_DETAIL":var i=t.blockId,u=t.actionIdx,p=t.contract,b=e.blocksById[i],f=b.actions,k=Q({},f[u],{contract:p}),O=[].concat(Object(q.a)(f.slice(0,u)),[k],Object(q.a)(f.slice(u+1))),h=Q({},b,{actions:O}),y=Q({},e.blocksById,Object(l.a)({},h.id,h));return Q({},e,{blocksById:y});case"TOGGLE_DETAILS":var d=t.blockId,m=e.blocksById[d],v=Q({},m,{showDetails:!m.showDetails}),E=Q({},e.blocksById,Object(l.a)({},v.id,v));return Q({},e,{blocksById:E});default:return e}},M=(n(111),new G({rpc:new i.JsonRpc("https://api.eosnewyork.io")})),z=Object(o.b)(H);Object(a.render)(c.a.createElement(s.a,{store:z},c.a.createElement(U,{eosClient:M})),document.getElementById("root"))},39:function(e,t,n){e.exports=n(112)}},[[39,1,2]]]);
//# sourceMappingURL=main.1ea09882.chunk.js.map